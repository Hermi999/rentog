#error_message
  = t('pool_tool.show.could_not_create_new_booking')

- if @open_listings == []
  .poolTool_no_listings_coverSite
    .poolTool_no_listings
      Your company has no (open) devices yet.
      .poolTool_no_listings_whatToDo
        If you are the company admin...
        %ul
          %li
            then you can create a new listing <a href="#{new_listing_path}">here</a>
          %li
            and you have already listings (but they are closed), then you can re-open them <a href="#{person_path(@person)}">here</a>

- content_for :extra_javascript do
  :javascript
    ST.poolTool().init();

- content_for :title_header do
  %h1= t("pool_tool.headline")
.row
  .col-3
    %button#addNewBooking.primary-button
      Add new booking

#addNewBookingForm
  /= form_tag(person_poolTool_path(@person), :action => :create) do
  /= form_tag(person_transactions_path, :action => :create, id:"test_abc") do
  = form_tag person_transactions_path, :action => :create, url: person_transactions_path, id: "poolTool_form" do

    %input{:type => 'hidden', :name => 'poolTool', :value => 'true'}
    %input{:type => 'hidden', :name => 'message', :value => 'Booked with PoolTool'}

    .row
      #employee_wrapper.col-5
        = label_tag :employees, "Choose Employee"
        = collection_select :employee, :username, @person.employees, :username, :full_name, {:prompt => "Please select..."}, {id: "dd_employee"}

      #poolTool_or.col-1
        or

      #renter_wrapper.col-5
        = label_tag :renter, "Enter another renter/reason"
        = text_field_tag :renter, nil, maxlength: 15, id: "tf_device_renter", placeholder: "fg: Maintainance", style: "width:100%;"

    #device_wrapper.row
      .col-12
        .home-fluid-thumbnail-grid-pooltool
          .home-fluid-thumbnail-grid
            = render :partial => "radio_grid_item", :collection => @open_listings, :as => :listing
      .clear-floating

    #datepicker_wrapper.row
      .input-daterange.input-group.clearfix#datepicker{:data => {:locale => I18n.locale, :format => t("datepicker.format")}}
        .datepicker-start-wrapper.col-3
          = label_tag t(".booking_from")
          %input.input-sm.form-control.required#start-on{:type => 'text', :name => "start_on", :placeholder => t("datepicker.format"), :data => { :output => "booking-start-output" } }
          %input#booking-start-output{:type => 'hidden', :name => 'start_on'}

        .datepicker-end-wrapper.col-3
          = label_tag t(".booking_to")
          %input.input-sm.form-control.required#end-on{:type => 'text', :name => "end_on", :placeholder => t("datepicker.format"), :data => { :output => "booking-end-output" }}
          %input#booking-end-output{:type => 'hidden', :name => 'end_on'}

    .clear-floating

    #submit_wrapper.row
      /.col-4
      .col-3
        = submit_tag("Create", id: "pooltool_submit_new_transaction", class: "success-button pooltool_create_booking")

.poolTool_gantt_container
  .gantt

#orr
  %p.orrText= t("pool_tool.turn_your_device")

.row
  .col-3
    = link_to t("homepage.index.post_new_listing"), new_listing_path, :class => "new-listing-link", :id => "new-listing-link"

#editListings
  %h3
    Edit your existing devices
  #listings-list{:style => "margin:15px;"}
    - limit = 20
    = render :partial => 'listings/profile_listings', :locals => {:person => @person, :limit => limit}
